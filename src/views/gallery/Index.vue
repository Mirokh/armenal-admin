<template>  <div>    <div class="row q-py-md q-px-md justify-between">      <h5 class="q-ma-xs">        Gallery      </h5>      <q-btn color="primary" size="md" label="Add new" icon="add" @click="create"/>    </div>    <q-separator inset class="q-my-sm"/>    <div class="row">      <div class="col-lg-3 col-md-4 col-sm-12 col-12 q-pa-sm" v-for="item of gallery" v-bind:key="item.id">        <q-card class="my-card">          <q-img :src="imagePath(item.imageUrl)"></q-img>          <q-card-actions align="between" class="q-py-xs q-px-sm">            <div class="text text-bold">{{ item.title.en }}</div>            <span>              <q-btn icon="edit" flat round @click="edit(item.id)"></q-btn>              <q-btn icon="delete" flat round @click="askForDelete(item.id)"></q-btn>            </span>          </q-card-actions>        </q-card>      </div>    </div>    <q-dialog v-model="confirm" persistent transition-show="scale" transition-hide="scale">      <q-card class="bg-teal text-white" style="width: 300px">        <q-card-section>          <div class="text-h6">Confirm to delete</div>        </q-card-section>        <q-card-section class="q-pt-none">          Are you sure to delete this gallery.        </q-card-section>        <q-card-actions align="right" class="bg-white text-teal">          <q-btn flat label="Cancel" color="primary" v-close-popup />          <q-btn flat label="Accept" @click="deleteGallery" color="primary" v-close-popup />        </q-card-actions>      </q-card>    </q-dialog>  </div></template><script>export default {  name: "GalleryIndex",  data() {    return {      gallery: [],      tempDeletingGalleryId: null,      confirm: false,    }  },  async created() {    this.gallery = (await this.$http.get('http://localhost:3000/gallery')).data  },  methods: {    create() {      this.$router.push({name: 'gallery_form'})    },    edit(id) {      this.$router.push({name: 'gallery_form', params: {id}})    },    askForDelete(id) {      this.tempDeletingGalleryId = id;      this.confirm = true;    },    deleteGallery() {      const token = localStorage.getItem('auth')      if (!token) {        console.error('unauthorized')        return      }      const headers = {        'Content-Type': 'multipart/form-data',        'Authorization': `Bearer ${token}`      };      this.$http.delete(`http://localhost:3000/gallery/${this.tempDeletingGalleryId}`, {headers}).then(() => {        this.$q.notify({          position: 'top-right',          type: 'positive',          message: 'Gallery deleted successfully'        })        this.loading = false      })      this.gallery = this.gallery.filter(obj => obj.id !== this.tempDeletingGalleryId);    },    imagePath(path) {      return `${process.env.VUE_APP_API_URL}/${path}`    },  }}</script><style scoped></style>